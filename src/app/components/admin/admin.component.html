<div class="admin-container">
  <header>
    <h1>Painel Admin - Estoque</h1>
    <button *ngIf="isAuthenticated" class="logout-btn" (click)="logout()">Sair</button>
  </header>

  <!-- Login Overlay -->
  <div class="login-overlay" *ngIf="!isAuthenticated">
    <div class="login-box">
      <h2>Área Administrativa</h2>
      
      <input
        *ngIf="useApi"
        type="text"
        [(ngModel)]="username"
        placeholder="Usuário"
        (keydown.enter)="login()"
      />
      
      <input
        type="password"
        [(ngModel)]="password"
        [placeholder]="useApi ? 'Senha' : 'Digite a senha de administrador'"
        (keydown.enter)="login()"
        autofocus
      />
      
      <button (click)="login()">Entrar</button>
      
      <div class="error" *ngIf="loginError">{{ loginError }}</div>
      
      <p class="hint" *ngIf="!useApi">Modo desenvolvimento: senha = kaka123</p>
      <p class="hint" *ngIf="useApi">Use suas credenciais do banco de dados</p>
    </div>
  </div>

  <!-- Main Content -->
  <main *ngIf="isAuthenticated">
    <div class="toolbar">
      <button class="reset-btn" (click)="resetDefaults()">
        Resetar Estoque Padrão
      </button>
    </div>

    <div class="cards-container">
      <div class="card" *ngFor="let product of products$ | async">
        <h3>{{ product.nome }}</h3>
        <span class="qty">Quantidade: {{ product.qtd }}</span>
        <div class="controls">
          <button 
            class="plus" 
            (click)="increment(product.id)"
            [attr.aria-label]="'Aumentar ' + product.nome"
          >
            +
          </button>
          <button 
            class="minus" 
            (click)="decrement(product.id)"
            [attr.aria-label]="'Diminuir ' + product.nome"
          >
            -
          </button>
        </div>
      </div>
    </div>

    <footer>
      {{ useApi ? 'Mudanças salvas no banco de dados.' : 'Mudanças salvas no localStorage.' }}
    </footer>
  </main>
</div>
